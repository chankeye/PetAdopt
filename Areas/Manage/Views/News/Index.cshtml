@using System.Runtime.InteropServices
@using MvcFileUploader.HtmlHelper
@using MvcFileUploader.Models
@using PetAdopt.Models
@{
    ViewBag.Title = "最新消息";
    Layout = "~/Areas/Manage/Views/Shared/_Layout.cshtml";

}
@section Scripts
{
    <script src="/Areas/Manage/Scripts/ctrls/NewsCtrl.js"></script>
}
<div class="page-header">
    <h2>@ViewBag.Title</h2>
</div>
<div>
    <form id="commentForm" class="form-horizontal" method="POST" name="form1">
        <legend class="text-info">
            <i class="fa fa-check"></i>
            新增消息
        </legend>
        <div class="container">
            <div class="well">
                <legend>上傳圖片</legend>
                <p class="help-block">只限副檔名 jpg / png 最大5 MB, 只能上傳一張圖片</p>
                <a class="btn btn-large btn-primary" data-target="#dlgFileUpload" data-toggle="modal" href="/MvcFileUpload/UploadDialog?FileTypes=%2F%28%5C.%7C%5C%2F%29%28jpe%3Fg%7Cpng%29%24%2Fi&amp;MaxFileSizeInBytes=5000000&amp;MaxNumberOfFiles=1&amp;DisableImagePreview=False&amp;UploadUrl=%2FMvcUploaderTest%2FUploadFile&amp;UIStyle=Bootstrap&amp;ReturnUrl=%23&amp;RenderSharedScript=True&amp;ShowPopUpClose=True&amp;postValues%5b0%5d.Key=entityId&amp;postValues%5b0%5d.Value=1234" role="button">上傳</a>
            </div>
            <!-- file upload modal dialog -->
            <div class="modal fade" id="dlgFileUpload" tabindex="-1" role="dialog" aria-hidden="true">
            </div><!-- /.modal -->
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">標題</label>
            <div class="col-sm-4">
                <input id="title" name="title" class="form-control required" maxlength="50" placeholder="請輸入標題" required autofocus />
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">地區</label>
            <div class="col-sm-4">
                <select id="selOptions" class="form-control"
                        data-bind="options: areas, optionsText: 'Word', optionsValue: 'Id'"></select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">內容</label>
            <div class="col-sm-4">
                <textarea id="content" name="content" class="form-control ckeditor"></textarea>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">消息來源</label>
            <div class="col-sm-4">
                <input id="source" name="source" type="url" class="form-control url" maxlength="100" placeholder="例：http://www.yahoo.com.tw" />
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button id="btn1" type="button" class="btn btn-primary" data-loading-text="處理中...">新增</button>
                <button id="btn2" type="button" class="btn btn-default">清除</button>
            </div>
        </div>
    </form>
    <hr />
    <legend class="text-info">
        <i class="fa fa-check"></i>
        消息管理
    </legend>
    <table class="table table-hover">
        <thead>
            <tr>
                <th></th>
                <th></th>
                <th>序號</th>
                <th>標題</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: history">
            <tr>
                <td><a href='#' data-bind="click: $root.removeNews">移除</a></td>
                <td><a href='#' data-bind="click: $root.editNews">編輯</a></td>
                <td><span data-bind="text: Id"></span></td>
                <td><span data-bind="text: Title"></span></td>
            </tr>
        </tbody>
        <tfoot>
            <tr><td data-bind="visible: responseMessage().trim() !== '', text: responseMessage"></td></tr>
        </tfoot>
    </table>
    <!--pagination-->
    <div class="pagination clearfix">
        <span class="prev"><a href="#">&lt;&lt; Previous</a></span>
        <ul class="pagi"></ul>
        <span class="next"><a href="#">Next &gt;&gt;</a></span>
    </div>
    <!--pagination-->
</div>
